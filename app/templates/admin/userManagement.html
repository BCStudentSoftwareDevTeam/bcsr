{% set currentPage ="userManagement" %}
{% extends "snips/base.html" %}
{% block body %}
{% include "snips/messages.html" %}

{# Add Administrator Form #}
{# Controller: editAdmin.py #}
{# ERRROR ALERT: Guillermo discovered that selectpicker doesn't work well within
a 'table' tag #}
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Add an Administrator</h3>
  </div>
  <div class="panel-body bodyPadding">
    <div class="form-group">
      <form action = "/editAdmin" method="post">
        {% if users %}
          <div class="col-md-9 selectPadding">
            <select title="Select User" class="form-control selectpicker" id="admin" name="admin[]" data-live-search='true'>
              {% for user in users %}
                <option value="{{user.username}}">
                  {{user.firstName}} {{user.lastName}} ({{user.username}})
                </option>
              {% endfor %}
            </select>
          </div>
        {% else %}
          <p>An error occuried while trying to access users.</p>
        {% endif %}
        <div width="316" height="88px">
          <div>
            <input type="submit" class="btn btn-default" value="Submit" id="submitAdd">
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

{# Remove Administrator Form #}
{# Controller: editAdmin.py #}
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Remove an Administrator</h3>
  </div>
  <div class="panel-body bodyPadding" style="padding-left:7px">
    <div class="form-group">
      <form action = "/editAdmin" method="post">
        {% if users %}
          <div class="col-md-9 selectPadding">
            <select title="Select User" class="form-control selectpicker" id="admin" name="admin[]" data-live-search='true'>
              {% for admin in admins %}
                <option value="{{admin.username}}">
                  {{admin.firstName}} {{admin.lastName}} ({{admin.username}})
                </option>
              {% endfor %}
            </select>
          </div>
        {% else %}
          <p>An error occuried while trying to access users.</p>
        {% endif %}
        <div width="316" height="88px">
          <div>
            <input type="submit" class="btn btn-danger" value="Remove" id="submitRemove">
          </div>
        </div>
      </form>
    </div>
  </div>
</div>


# This is for programs

<div id="wrapper">
  {% include "sidebar/userManagementSidebar.html" %}
  <script type="text/javascript" src="/static/js/local/sidebar.js"></script>
  <link rel="stylesheet" href="/static/css/sidebar.css" type="text/css" />
  <div id="page-wrapper">
{% include "snips/messages.html" %}
    <div class="container-fluid">
      <div class="row">
        <form action="\editProgram" method="post" id="programEditForm{{program.pid}}">
          <h2>{{program.name}}</h2>
          <h4>Change Program Chair(s)</h4>
          <input value={{program.PID}} id="PID" name="PID" hidden readonly="readonly" />
          <select class="selectpicker form-control" id="professors" name="professors[]" data-live-search="true" multiple>
              {% for user in users %}
                <option value="{{user.username}}"
                    {%for chair in programChairs[program.PID] %}
                      {% if chair == user %}
                        selected
                      {% endif %}
                    {% endfor %}
                >
                  {{user.firstName}} {{user.lastName}} ({{user.username}})
                </option>
              {% endfor %}
            </select>
          <!--</div>-->
          <input type="submit" class="btn btn-default pull-right" value="Submit" />
        </form>
      </div>
    </div>
    <!-- /#page-content-wrapper -->
  </div>
  <!-- /#wrapper -->
</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>


# This is for divisions

<script type="text/javascript" src="/static/js/local/sidebar.js"></script>
<link rel="stylesheet" href="/static/css/sidebar.css" type="text/css" />
{% include "sidebar/userManagementSidebar.html" %}
<div id="wrapper">
  <div id="page-wrapper">
    {% include "snips/messages.html" %}

    <div class="container-fluid">
      <div class="row">
        <form action="\editDivision" method="post" id="divisionEditForm{{division.dID}}">
          <h2>{{division.name}}</h2>
          <input value={{division.DID}} id="DID" name="DID" hidden readonly="readonly" />
          <h4>Change Division Chair(s)</h4>
          <select class="selectpicker form-control" id="professors" name="professors[]" multiple data-live-search="true">
              {% for user in users %}
                <option value="{{user.username}}"
                  {% if (division is defined)  %}
                    {%for chair in divisionChairs[division.DID] %}
                      {% if chair == user %}
                        selected
                      {% endif %}
                    {% endfor %}
                  {% endif %}
                  data-subtext="{{user.username}}"
                >
                  {{user.firstName}} {{user.lastName}}
                </option>
              {% endfor %}
            </select>
          <div>
            <input type="submit" class="btn btn-default pull-right" value="Submit" />
          </div>
        </form>
      </div>
    </div>
    <!-- /#page-content-wrapper -->
  </div>
  <!-- /#wrapper -->
</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>

{% endblock %}
